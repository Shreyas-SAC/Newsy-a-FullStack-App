{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shrey\\\\Desktop\\\\reactproject\\\\Newsy\\\\src\\\\pages\\\\Link.js\";\nimport React from \"react\";\nimport firebase from \"../firebase\";\nimport { Plugins } from \"@capacitor/core\";\nimport UserContext from \"../contexts/UserContext\";\nimport { IonPage, IonContent, IonGrid, IonRow, IonCol } from \"@ionic/react\";\nimport NavHeader from \"../components/Header/NavHeader\";\nimport { closeCircleOutline } from \"ionicons/icons\";\nimport LinkItem from \"../components/Link/LinkItem\";\nconst {\n  Browser\n} = Plugins;\n\nconst Link = props => {\n  const {\n    user\n  } = React.useContext(UserContext);\n  const [link, setLink] = React.useState(null);\n  const linkId = props.match.params.linkId;\n  const linkRef = firebase.db.collection(\"links\").doc(linkId);\n  React.useEffect(() => {\n    getLink(); // eslint-disable-next-line\n  }, [linkId]);\n\n  function getLink() {\n    linkRef.get().then(doc => {\n      setLink({ ...doc.data(),\n        id: doc.id\n      });\n    });\n  }\n\n  function handleDeleteLink() {\n    linkRef.delete().then(() => {\n      console.log(`Document with ID ${link.id} deleted`);\n    }).catch(err => {\n      console.error(\"Error deleting document\", err);\n    });\n    props.history.push(\"/\");\n  }\n\n  function postedByAuthUser(link) {\n    return user && user.uid === link.postedBy.id;\n  }\n\n  async function openBrowser() {\n    await Browser.open({\n      url: link.url\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavHeader, {\n    title: link && link.description,\n    option: link && postedByAuthUser(link),\n    icon: closeCircleOutline,\n    action: handleDeleteLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, link && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    class: \"ion-text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(LinkItem, {\n    link: link,\n    browser: openBrowser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  })))))));\n};\n\nexport default Link;","map":{"version":3,"sources":["C:/Users/shrey/Desktop/reactproject/Newsy/src/pages/Link.js"],"names":["React","firebase","Plugins","UserContext","IonPage","IonContent","IonGrid","IonRow","IonCol","NavHeader","closeCircleOutline","LinkItem","Browser","Link","props","user","useContext","link","setLink","useState","linkId","match","params","linkRef","db","collection","doc","useEffect","getLink","get","then","data","id","handleDeleteLink","delete","console","log","catch","err","error","history","push","postedByAuthUser","uid","postedBy","openBrowser","open","url","description"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,OAA9B,EAAuCC,MAAvC,EAA+CC,MAA/C,QAA6D,cAA7D;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,SAASC,kBAAT,QAAmC,gBAAnC;AACA,OAAOC,QAAP,MAAqB,6BAArB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAcV,OAApB;;AAEA,MAAMW,IAAI,GAAIC,KAAD,IAAW;AACtB,QAAM;AAAEC,IAAAA;AAAF,MAAWf,KAAK,CAACgB,UAAN,CAAiBb,WAAjB,CAAjB;AACA,QAAM,CAACc,IAAD,EAAOC,OAAP,IAAkBlB,KAAK,CAACmB,QAAN,CAAe,IAAf,CAAxB;AACA,QAAMC,MAAM,GAAGN,KAAK,CAACO,KAAN,CAAYC,MAAZ,CAAmBF,MAAlC;AACA,QAAMG,OAAO,GAAGtB,QAAQ,CAACuB,EAAT,CAAYC,UAAZ,CAAuB,OAAvB,EAAgCC,GAAhC,CAAoCN,MAApC,CAAhB;AAEApB,EAAAA,KAAK,CAAC2B,SAAN,CAAgB,MAAM;AACpBC,IAAAA,OAAO,GADa,CAEpB;AACD,GAHD,EAGG,CAACR,MAAD,CAHH;;AAKA,WAASQ,OAAT,GAAmB;AACjBL,IAAAA,OAAO,CAACM,GAAR,GAAcC,IAAd,CAAoBJ,GAAD,IAAS;AAC1BR,MAAAA,OAAO,CAAC,EAAE,GAAGQ,GAAG,CAACK,IAAJ,EAAL;AAAiBC,QAAAA,EAAE,EAAEN,GAAG,CAACM;AAAzB,OAAD,CAAP;AACD,KAFD;AAGD;;AACD,WAASC,gBAAT,GAA4B;AAC1BV,IAAAA,OAAO,CACJW,MADH,GAEGJ,IAFH,CAEQ,MAAM;AACVK,MAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBnB,IAAI,CAACe,EAAG,UAAxC;AACD,KAJH,EAKGK,KALH,CAKUC,GAAD,IAAS;AACdH,MAAAA,OAAO,CAACI,KAAR,CAAc,yBAAd,EAAyCD,GAAzC;AACD,KAPH;AAQAxB,IAAAA,KAAK,CAAC0B,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;;AAED,WAASC,gBAAT,CAA0BzB,IAA1B,EAAgC;AAC9B,WAAOF,IAAI,IAAIA,IAAI,CAAC4B,GAAL,KAAa1B,IAAI,CAAC2B,QAAL,CAAcZ,EAA1C;AACD;;AAED,iBAAea,WAAf,GAA6B;AAC3B,UAAMjC,OAAO,CAACkC,IAAR,CAAa;AACjBC,MAAAA,GAAG,EAAE9B,IAAI,CAAC8B;AADO,KAAb,CAAN;AAGD;;AAED,sBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,KAAK,EAAE9B,IAAI,IAAIA,IAAI,CAAC+B,WADtB;AAEE,IAAA,MAAM,EAAE/B,IAAI,IAAIyB,gBAAgB,CAACzB,IAAD,CAFlC;AAGE,IAAA,IAAI,EAAEP,kBAHR;AAIE,IAAA,MAAM,EAAEuB,gBAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,IAAI,iBACH,uDACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEA,IAAhB;AAAsB,IAAA,OAAO,EAAE4B,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,CADF,CAFJ,CAPF,CADF;AAuBD,CA7DD;;AA+DA,eAAehC,IAAf","sourcesContent":["import React from \"react\";\r\nimport firebase from \"../firebase\";\r\nimport { Plugins } from \"@capacitor/core\";\r\nimport UserContext from \"../contexts/UserContext\";\r\nimport { IonPage, IonContent, IonGrid, IonRow, IonCol } from \"@ionic/react\";\r\nimport NavHeader from \"../components/Header/NavHeader\";\r\nimport { closeCircleOutline } from \"ionicons/icons\";\r\nimport LinkItem from \"../components/Link/LinkItem\";\r\n\r\nconst { Browser } = Plugins;\r\n\r\nconst Link = (props) => {\r\n  const { user } = React.useContext(UserContext);\r\n  const [link, setLink] = React.useState(null);\r\n  const linkId = props.match.params.linkId;\r\n  const linkRef = firebase.db.collection(\"links\").doc(linkId);\r\n\r\n  React.useEffect(() => {\r\n    getLink();\r\n    // eslint-disable-next-line\r\n  }, [linkId]);\r\n\r\n  function getLink() {\r\n    linkRef.get().then((doc) => {\r\n      setLink({ ...doc.data(), id: doc.id });\r\n    });\r\n  }\r\n  function handleDeleteLink() {\r\n    linkRef\r\n      .delete()\r\n      .then(() => {\r\n        console.log(`Document with ID ${link.id} deleted`);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error deleting document\", err);\r\n      });\r\n    props.history.push(\"/\");\r\n  }\r\n\r\n  function postedByAuthUser(link) {\r\n    return user && user.uid === link.postedBy.id;\r\n  }\r\n\r\n  async function openBrowser() {\r\n    await Browser.open({\r\n      url: link.url,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <NavHeader\r\n        title={link && link.description}\r\n        option={link && postedByAuthUser(link)}\r\n        icon={closeCircleOutline}\r\n        action={handleDeleteLink}\r\n      />\r\n      <IonContent>\r\n        {link && (\r\n          <>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol class=\"ion-text-center\">\r\n                  <LinkItem link={link} browser={openBrowser} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Link;\r\n"]},"metadata":{},"sourceType":"module"}