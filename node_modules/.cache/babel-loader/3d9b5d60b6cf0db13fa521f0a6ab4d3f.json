{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\src\\\\pages\\\\Tabs\\\\Search.js\";\nimport React from \"react\";\nimport { IonPage, IonContent, IonSearchbar } from \"@ionic/react\";\nimport firebase from \"../../firebase\";\nimport LinkItem from \"../../components/Link/LinkItem\";\nimport SmallHeader from \"../../components/Header/SmallHeader\";\nimport LargeHeader from \"../../components/Header/LargeHeader\";\n\nconst Search = () => {\n  const [links, setLinks] = React.useState([]);\n  const [filter, setFilter] = React.useState(\"\");\n  const [filteredLinks, setFilteredLinks] = React.useState([]);\n  React.useEffect(() => {\n    getInitialLinks(); //eslint-disable-next-line\n  }, []);\n  React.useEffect(() => {\n    handleSearch(); // eslint-disable-next-line\n  }, [filter]);\n\n  function getInitialLinks() {\n    firebase.db.collection(\"links\").get().then(snapshot => {\n      const links = snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      setLinks(links);\n    });\n  }\n\n  function handleChange(evt) {\n    if (evt.key === \"Enter\") {\n      setFilter(evt.target.value);\n    }\n  }\n\n  function handleSearch() {\n    const query = filter.toLowerCase();\n    const matchedLinks = links.filter(link => {\n      return link.description.toLowerCase().includes(query) || link.url.toLowerCase().includes(query) || link.postedBy.name.toLowerCase().includes(query);\n    });\n    setFilteredLinks(matchedLinks);\n  }\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SmallHeader, {\n    title: \"Search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LargeHeader, {\n    title: \"Search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(IonSearchbar, {\n    placeholder: \"Search\",\n    spellcheck: \"false\",\n    type: \"url\",\n    value: filter,\n    onKeyPress: handleChange,\n    animated: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), filteredLinks.map((filteredLink, index) => /*#__PURE__*/React.createElement(LinkItem, {\n    key: filteredLink.id,\n    showCount: false,\n    link: filteredLink,\n    index: index,\n    url: `/link/${filteredLink.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/shrey/Desktop/ReactProject/Newsy/src/pages/Tabs/Search.js"],"names":["React","IonPage","IonContent","IonSearchbar","firebase","LinkItem","SmallHeader","LargeHeader","Search","links","setLinks","useState","filter","setFilter","filteredLinks","setFilteredLinks","useEffect","getInitialLinks","handleSearch","db","collection","get","then","snapshot","docs","map","doc","id","data","handleChange","evt","key","target","value","query","toLowerCase","matchedLinks","link","description","includes","url","postedBy","name","filteredLink","index"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { IonPage, IonContent, IonSearchbar } from \"@ionic/react\";\r\nimport firebase from \"../../firebase\";\r\nimport LinkItem from \"../../components/Link/LinkItem\";\r\nimport SmallHeader from \"../../components/Header/SmallHeader\";\r\nimport LargeHeader from \"../../components/Header/LargeHeader\";\r\n\r\nconst Search = () => {\r\n  const [links, setLinks] = React.useState([]);\r\n  const [filter, setFilter] = React.useState(\"\");\r\n  const [filteredLinks, setFilteredLinks] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    getInitialLinks();\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    handleSearch();\r\n    // eslint-disable-next-line\r\n  }, [filter]);\r\n\r\n  function getInitialLinks() {\r\n    firebase.db\r\n      .collection(\"links\")\r\n      .get()\r\n      .then((snapshot) => {\r\n        const links = snapshot.docs.map((doc) => {\r\n          return { id: doc.id, ...doc.data() };\r\n        });\r\n        setLinks(links);\r\n      });\r\n  }\r\n\r\n  function handleChange(evt) {\r\n    if (evt.key === \"Enter\") {\r\n      setFilter(evt.target.value);\r\n    }\r\n  }\r\n\r\n  function handleSearch() {\r\n    const query = filter.toLowerCase();\r\n    const matchedLinks = links.filter((link) => {\r\n      return (\r\n        link.description.toLowerCase().includes(query) ||\r\n        link.url.toLowerCase().includes(query) ||\r\n        link.postedBy.name.toLowerCase().includes(query)\r\n      );\r\n    });\r\n    setFilteredLinks(matchedLinks);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <SmallHeader title=\"Search\" />\r\n      <IonContent fullscreen>\r\n        <LargeHeader title=\"Search\" />\r\n        <IonSearchbar\r\n          placeholder=\"Search\"\r\n          spellcheck=\"false\"\r\n          type=\"url\"\r\n          value={filter}\r\n          onKeyPress={handleChange}\r\n          animated\r\n        />\r\n        {filteredLinks.map((filteredLink, index) => (\r\n          <LinkItem\r\n            key={filteredLink.id}\r\n            showCount={false}\r\n            link={filteredLink}\r\n            index={index}\r\n            url={`/link/${filteredLink.id}`}\r\n          />\r\n        ))}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}