{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{IonPage,IonContent,IonItem,IonLabel,IonInput,IonRow,IonCol,IonButton,IonRouterLink,IonLoading}from\"@ionic/react\";import NavHeader from\"../../components/Header/NavHeader\";import validateLogin from\"../../validators/validateLogin\";import useForm from\"../../hooks/useForm\";import firebase from\"../../firebase\";import{toast}from\"../../helpers/toast\";var INITIAL_STATE={email:\"\",password:\"\"};var Login=function Login(props){var _useForm=useForm(INITIAL_STATE,validateLogin,authenticateUser),handleSubmit=_useForm.handleSubmit,handleChange=_useForm.handleChange,values=_useForm.values,isSubmitting=_useForm.isSubmitting;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),busy=_React$useState2[0],setBusy=_React$useState2[1];function authenticateUser(){return _authenticateUser.apply(this,arguments);}function _authenticateUser(){_authenticateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var email,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setBusy(true);email=values.email,password=values.password;_context.prev=2;_context.next=5;return firebase.login(email,password);case 5:toast(\"You have logged in successfully!\");props.history.push(\"/\");_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.error(\"Authentication Error\",_context.t0);toast(_context.t0.message);case 13:setBusy(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _authenticateUser.apply(this,arguments);}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(NavHeader,{title:\"Log In\"}),/*#__PURE__*/React.createElement(IonLoading,{message:\"Please wait...\",isOpen:busy}),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonItem,{lines:\"full\"},/*#__PURE__*/React.createElement(IonLabel,{position:\"floating\"},\"Email\"),/*#__PURE__*/React.createElement(IonInput,{name:\"email\",type:\"text\",value:values.email,onIonChange:handleChange,required:true})),/*#__PURE__*/React.createElement(IonItem,{lines:\"full\"},/*#__PURE__*/React.createElement(IonLabel,{position:\"floating\"},\"Password\"),/*#__PURE__*/React.createElement(IonInput,{name:\"password\",type:\"password\",value:values.password,onIonChange:handleChange,required:true})),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{type:\"submit\",color:\"primary\",expand:\"block\",onClick:handleSubmit,disabled:isSubmitting},\"Log In\"))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{class:\"ion-text-center ion-padding-vertical\"},/*#__PURE__*/React.createElement(IonRouterLink,{routerLink:\"/forgot\"},\"Forgot Password?\")))));};export default Login;","map":{"version":3,"sources":["C:/Users/shrey/Desktop/ReactProject/Newsy/src/pages/Auth/Login.js"],"names":["React","IonPage","IonContent","IonItem","IonLabel","IonInput","IonRow","IonCol","IonButton","IonRouterLink","IonLoading","NavHeader","validateLogin","useForm","firebase","toast","INITIAL_STATE","email","password","Login","props","authenticateUser","handleSubmit","handleChange","values","isSubmitting","useState","busy","setBusy","login","history","push","console","error","message"],"mappings":"2fAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,OADF,CAEEC,UAFF,CAGEC,OAHF,CAIEC,QAJF,CAKEC,QALF,CAMEC,MANF,CAOEC,MAPF,CAQEC,SARF,CASEC,aATF,CAUEC,UAVF,KAWO,cAXP,CAYA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gCAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,OAASC,KAAT,KAAsB,qBAAtB,CAEA,GAAMC,CAAAA,aAAa,CAAG,CACpBC,KAAK,CAAE,EADa,CAEpBC,QAAQ,CAAE,EAFU,CAAtB,CAKA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,cACsCP,OAAO,CAClEG,aADkE,CAElEJ,aAFkE,CAGlES,gBAHkE,CAD7C,CACfC,YADe,UACfA,YADe,CACDC,YADC,UACDA,YADC,CACaC,MADb,UACaA,MADb,CACqBC,YADrB,UACqBA,YADrB,qBAMCzB,KAAK,CAAC0B,QAAN,CAAe,KAAf,CAND,oDAMhBC,IANgB,qBAMVC,OANU,6BAQRP,CAAAA,gBARQ,0JAQvB,sJACEO,OAAO,CAAC,IAAD,CAAP,CACQX,KAFV,CAE8BO,MAF9B,CAEUP,KAFV,CAEiBC,QAFjB,CAE8BM,MAF9B,CAEiBN,QAFjB,uCAIUJ,CAAAA,QAAQ,CAACe,KAAT,CAAeZ,KAAf,CAAsBC,QAAtB,CAJV,QAKIH,KAAK,CAAC,kCAAD,CAAL,CACAK,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EANJ,+EAQIC,OAAO,CAACC,KAAR,CAAc,sBAAd,cACAlB,KAAK,CAAC,YAAImB,OAAL,CAAL,CATJ,QAWEN,OAAO,CAAC,KAAD,CAAP,CAXF,oEARuB,mDAsBvB,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,EADF,cAEE,oBAAC,UAAD,EAAY,OAAO,CAAE,gBAArB,CAAuC,MAAM,CAAED,IAA/C,EAFF,cAGE,oBAAC,UAAD,mBACE,oBAAC,OAAD,EAAS,KAAK,CAAC,MAAf,eACE,oBAAC,QAAD,EAAU,QAAQ,CAAC,UAAnB,UADF,cAEE,oBAAC,QAAD,EACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAEH,MAAM,CAACP,KAHhB,CAIE,WAAW,CAAEM,YAJf,CAKE,QAAQ,KALV,EAFF,CADF,cAWE,oBAAC,OAAD,EAAS,KAAK,CAAC,MAAf,eACE,oBAAC,QAAD,EAAU,QAAQ,CAAC,UAAnB,aADF,cAEE,oBAAC,QAAD,EACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAEC,MAAM,CAACN,QAHhB,CAIE,WAAW,CAAEK,YAJf,CAKE,QAAQ,KALV,EAFF,CAXF,cAqBE,oBAAC,MAAD,mBACE,oBAAC,MAAD,mBACE,oBAAC,SAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,SAFR,CAGE,MAAM,CAAC,OAHT,CAIE,OAAO,CAAED,YAJX,CAKE,QAAQ,CAAEG,YALZ,WADF,CADF,CArBF,cAkCE,oBAAC,MAAD,mBACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,sCAAd,eACE,oBAAC,aAAD,EAAe,UAAU,CAAE,SAA3B,qBADF,CADF,CAlCF,CAHF,CADF,CAgDD,CAtED,CAwEA,cAAeN,CAAAA,KAAf","sourcesContent":["import React from \"react\";\r\nimport {\r\n  IonPage,\r\n  IonContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonInput,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonRouterLink,\r\n  IonLoading,\r\n} from \"@ionic/react\";\r\nimport NavHeader from \"../../components/Header/NavHeader\";\r\nimport validateLogin from \"../../validators/validateLogin\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport firebase from \"../../firebase\";\r\nimport { toast } from \"../../helpers/toast\";\r\n\r\nconst INITIAL_STATE = {\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst Login = (props) => {\r\n  const { handleSubmit, handleChange, values, isSubmitting } = useForm(\r\n    INITIAL_STATE,\r\n    validateLogin,\r\n    authenticateUser\r\n  );\r\n  const [busy, setBusy] = React.useState(false);\r\n\r\n  async function authenticateUser() {\r\n    setBusy(true);\r\n    const { email, password } = values;\r\n    try {\r\n      await firebase.login(email, password);\r\n      toast(\"You have logged in successfully!\");\r\n      props.history.push(\"/\");\r\n    } catch (err) {\r\n      console.error(\"Authentication Error\", err);\r\n      toast(err.message);\r\n    }\r\n    setBusy(false);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <NavHeader title=\"Log In\" />\r\n      <IonLoading message={\"Please wait...\"} isOpen={busy} />\r\n      <IonContent>\r\n        <IonItem lines=\"full\">\r\n          <IonLabel position=\"floating\">Email</IonLabel>\r\n          <IonInput\r\n            name=\"email\"\r\n            type=\"text\"\r\n            value={values.email}\r\n            onIonChange={handleChange}\r\n            required\r\n          ></IonInput>\r\n        </IonItem>\r\n        <IonItem lines=\"full\">\r\n          <IonLabel position=\"floating\">Password</IonLabel>\r\n          <IonInput\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={values.password}\r\n            onIonChange={handleChange}\r\n            required\r\n          ></IonInput>\r\n        </IonItem>\r\n        <IonRow>\r\n          <IonCol>\r\n            <IonButton\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              expand=\"block\"\r\n              onClick={handleSubmit}\r\n              disabled={isSubmitting}\r\n            >\r\n              Log In\r\n            </IonButton>\r\n          </IonCol>\r\n        </IonRow>\r\n        <IonRow>\r\n          <IonCol class=\"ion-text-center ion-padding-vertical\">\r\n            <IonRouterLink routerLink={\"/forgot\"}>\r\n              Forgot Password?\r\n            </IonRouterLink>\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}