{"ast":null,"code":"import React from\"react\";import{IonPage,IonContent,IonItem,IonLabel,IonInput,IonRow,IonCol,IonButton}from\"@ionic/react\";import SmallHeader from\"../../components/Header/SmallHeader\";import LargeHeader from\"../../components/Header/LargeHeader\";import UserContext from\"../../contexts/UserContext\";import useForm from\"../../hooks/useForm\";import firebase from\"../../firebase\";import validateCreateLink from\"../../validators/validateCreateLink\";var INITIAL_STATE={description:\"\",url:\"\"};var Submit=function Submit(props){var _React$useContext=React.useContext(UserContext),user=_React$useContext.user;var _useForm=useForm(INITIAL_STATE,validateCreateLink,handleCreateLink),handleSubmit=_useForm.handleSubmit,handleChange=_useForm.handleChange,values=_useForm.values;function handleCreateLink(){if(!user){props.history.push(\"/login\");}else{var url=values.url,description=values.description;var newLink={url:url,description:description,postedBy:{id:user.uid,name:user.displayName},voteCount:1,votes:[],comments:[],created:Date.now()};firebase.db.collection(\"links\").add(newLink);props.history.push(\"/\");}}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(SmallHeader,{title:\"Submit\"}),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true},/*#__PURE__*/React.createElement(LargeHeader,{title:\"Submit\"}),/*#__PURE__*/React.createElement(IonItem,{lines:\"full\"},/*#__PURE__*/React.createElement(IonLabel,{position:\"floating\"},\"Description\"),/*#__PURE__*/React.createElement(IonInput,{name:\"description\",value:values.description,type:\"text\",onIonChange:handleChange,required:true})),/*#__PURE__*/React.createElement(IonItem,{lines:\"full\"},/*#__PURE__*/React.createElement(IonLabel,{position:\"floating\"},\"URL\"),/*#__PURE__*/React.createElement(IonInput,{name:\"url\",value:values.url,type:\"url\",onIonChange:handleChange,required:true})),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{type:\"submit\",color:\"primary\",expand:\"block\",onClick:handleSubmit},\"Submit\")))));};export default Submit;","map":{"version":3,"sources":["C:/Users/shrey/Desktop/ReactProject/Newsy/src/pages/Tabs/Submit.js"],"names":["React","IonPage","IonContent","IonItem","IonLabel","IonInput","IonRow","IonCol","IonButton","SmallHeader","LargeHeader","UserContext","useForm","firebase","validateCreateLink","INITIAL_STATE","description","url","Submit","props","useContext","user","handleCreateLink","handleSubmit","handleChange","values","history","push","newLink","postedBy","id","uid","name","displayName","voteCount","votes","comments","created","Date","now","db","collection","add"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  IonPage,\r\n  IonContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonInput,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n} from \"@ionic/react\";\r\nimport SmallHeader from \"../../components/Header/SmallHeader\";\r\nimport LargeHeader from \"../../components/Header/LargeHeader\";\r\nimport UserContext from \"../../contexts/UserContext\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport firebase from \"../../firebase\";\r\nimport validateCreateLink from \"../../validators/validateCreateLink\";\r\n\r\nconst INITIAL_STATE = {\r\n  description: \"\",\r\n  url: \"\",\r\n};\r\n\r\nconst Submit = (props) => {\r\n  const { user } = React.useContext(UserContext);\r\n  const { handleSubmit, handleChange, values } = useForm(\r\n    INITIAL_STATE,\r\n    validateCreateLink,\r\n    handleCreateLink\r\n  );\r\n\r\n  function handleCreateLink() {\r\n    if (!user) {\r\n      props.history.push(\"/login\");\r\n    } else {\r\n      const { url, description } = values;\r\n      const newLink = {\r\n        url,\r\n        description,\r\n        postedBy: {\r\n          id: user.uid,\r\n          name: user.displayName,\r\n        },\r\n        voteCount: 1,\r\n        votes: [],\r\n        comments: [],\r\n        created: Date.now(),\r\n      };\r\n      firebase.db.collection(\"links\").add(newLink);\r\n      props.history.push(\"/\");\r\n    }\r\n  }\r\n  return (\r\n    <IonPage>\r\n      <SmallHeader title=\"Submit\" />\r\n      <IonContent fullscreen>\r\n        <LargeHeader title=\"Submit\" />\r\n        <IonItem lines=\"full\">\r\n          <IonLabel position=\"floating\">Description</IonLabel>\r\n          <IonInput\r\n            name=\"description\"\r\n            value={values.description}\r\n            type=\"text\"\r\n            onIonChange={handleChange}\r\n            required\r\n          ></IonInput>\r\n        </IonItem>\r\n\r\n        <IonItem lines=\"full\">\r\n          <IonLabel position=\"floating\">URL</IonLabel>\r\n          <IonInput\r\n            name=\"url\"\r\n            value={values.url}\r\n            type=\"url\"\r\n            onIonChange={handleChange}\r\n            required\r\n          ></IonInput>\r\n        </IonItem>\r\n        <IonRow>\r\n          <IonCol>\r\n            <IonButton\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              expand=\"block\"\r\n              onClick={handleSubmit}\r\n            >\r\n              Submit\r\n            </IonButton>\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Submit;\r\n"]},"metadata":{},"sourceType":"module"}