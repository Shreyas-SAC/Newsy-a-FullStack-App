{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\shrey\\\\Desktop\\\\ReactProject\\\\Newsy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{IonPage,IonContent,IonSearchbar}from\"@ionic/react\";import firebase from\"../../firebase\";import LinkItem from\"../../components/Link/LinkItem\";import SmallHeader from\"../../components/Header/SmallHeader\";import LargeHeader from\"../../components/Header/LargeHeader\";var Search=function Search(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),links=_React$useState2[0],setLinks=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),filter=_React$useState4[0],setFilter=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),filteredLinks=_React$useState6[0],setFilteredLinks=_React$useState6[1];React.useEffect(function(){getInitialLinks();//eslint-disable-next-line\n},[]);React.useEffect(function(){handleSearch();// eslint-disable-next-line\n},[filter]);function getInitialLinks(){firebase.db.collection(\"links\").get().then(function(snapshot){var links=snapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setLinks(links);});}function handleChange(evt){if(evt.key===\"Enter\"){setFilter(evt.target.value);}}function handleSearch(){var query=filter.toLowerCase();var matchedLinks=links.filter(function(link){return link.description.toLowerCase().includes(query)||link.url.toLowerCase().includes(query)||link.postedBy.name.toLowerCase().includes(query);});setFilteredLinks(matchedLinks);}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(SmallHeader,{title:\"Search\"}),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true},/*#__PURE__*/React.createElement(LargeHeader,{title:\"Search\"}),/*#__PURE__*/React.createElement(IonSearchbar,{placeholder:\"Search\",spellcheck:\"false\",type:\"url\",value:filter,onKeyPress:handleChange,animated:true}),filteredLinks.map(function(filteredLink,index){return/*#__PURE__*/React.createElement(LinkItem,{key:filteredLink.id,showCount:false,link:filteredLink,index:index,url:\"/link/\".concat(filteredLink.id)});})));};export default Search;","map":{"version":3,"sources":["C:/Users/shrey/Desktop/ReactProject/Newsy/src/pages/Tabs/Search.js"],"names":["React","IonPage","IonContent","IonSearchbar","firebase","LinkItem","SmallHeader","LargeHeader","Search","useState","links","setLinks","filter","setFilter","filteredLinks","setFilteredLinks","useEffect","getInitialLinks","handleSearch","db","collection","get","then","snapshot","docs","map","doc","id","data","handleChange","evt","key","target","value","query","toLowerCase","matchedLinks","link","description","includes","url","postedBy","name","filteredLink","index"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { IonPage, IonContent, IonSearchbar } from \"@ionic/react\";\r\nimport firebase from \"../../firebase\";\r\nimport LinkItem from \"../../components/Link/LinkItem\";\r\nimport SmallHeader from \"../../components/Header/SmallHeader\";\r\nimport LargeHeader from \"../../components/Header/LargeHeader\";\r\n\r\nconst Search = () => {\r\n  const [links, setLinks] = React.useState([]);\r\n  const [filter, setFilter] = React.useState(\"\");\r\n  const [filteredLinks, setFilteredLinks] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    getInitialLinks();\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    handleSearch();\r\n    // eslint-disable-next-line\r\n  }, [filter]);\r\n\r\n  function getInitialLinks() {\r\n    firebase.db\r\n      .collection(\"links\")\r\n      .get()\r\n      .then((snapshot) => {\r\n        const links = snapshot.docs.map((doc) => {\r\n          return { id: doc.id, ...doc.data() };\r\n        });\r\n        setLinks(links);\r\n      });\r\n  }\r\n\r\n  function handleChange(evt) {\r\n    if (evt.key === \"Enter\") {\r\n      setFilter(evt.target.value);\r\n    }\r\n  }\r\n\r\n  function handleSearch() {\r\n    const query = filter.toLowerCase();\r\n    const matchedLinks = links.filter((link) => {\r\n      return (\r\n        link.description.toLowerCase().includes(query) ||\r\n        link.url.toLowerCase().includes(query) ||\r\n        link.postedBy.name.toLowerCase().includes(query)\r\n      );\r\n    });\r\n    setFilteredLinks(matchedLinks);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <SmallHeader title=\"Search\" />\r\n      <IonContent fullscreen>\r\n        <LargeHeader title=\"Search\" />\r\n        <IonSearchbar\r\n          placeholder=\"Search\"\r\n          spellcheck=\"false\"\r\n          type=\"url\"\r\n          value={filter}\r\n          onKeyPress={handleChange}\r\n          animated\r\n        />\r\n        {filteredLinks.map((filteredLink, index) => (\r\n          <LinkItem\r\n            key={filteredLink.id}\r\n            showCount={false}\r\n            link={filteredLink}\r\n            index={index}\r\n            url={`/link/${filteredLink.id}`}\r\n          />\r\n        ))}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}